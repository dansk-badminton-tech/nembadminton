(window.webpackJsonp=window.webpackJsonp||[]).push([[6,9,15],{"8Vt7":function(e,n,t){"use strict";t.r(n);var i=t("lTCR"),r=t.n(i),a=t("j0+K");function o(){var e=function(e,n){n||(n=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}(["\n                        mutation ($input: LoginInput){\n                          login(input: $input){\n                            access_token\n                          }\n                        }\n                    "]);return o=function(){return e},e}var s={name:"Login",data:function(){return{email:null,password:null,loading:!1}},props:{afterLogin:Function},methods:{login:function(){var e=this;this.loading=!0,this.$apollo.mutate({mutation:r()(o()),variables:{input:{username:this.email,password:this.password}}}).then((function(n){var t=n.data;Object(a.d)(t.login.access_token),e.$root.$emit("loggedIn"),e.afterLogin instanceof Function?e.afterLogin():e.$router.push({name:"team-fight-dashboard"})})).catch((function(n){n.graphQLErrors;e.$buefy.snackbar.open({duration:6e3,type:"is-danger",message:"Forkert brugernavn eller adgangskode."})})).finally((function(){e.loading=!1}))}}},l=t("KHd+"),u=Object(l.a)(s,(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("form",{staticClass:"mt-2",on:{submit:function(n){return n.preventDefault(),e.login(n)}}},[t("b-field",{attrs:{label:"Email"}},[t("b-input",{attrs:{type:"email"},model:{value:e.email,callback:function(n){e.email=n},expression:"email"}})],1),e._v(" "),t("b-field",{attrs:{label:"Adgangskode"}},[t("b-input",{attrs:{type:"password"},model:{value:e.password,callback:function(n){e.password=n},expression:"password"}})],1),e._v(" "),t("b-button",{attrs:{loading:e.loading,"native-type":"submit"}},[e._v("Login")])],1)}),[],!1,null,"b2e23c82",null);n.default=u.exports},"90ce":function(e,n,t){"use strict";var i=t("Yfz1"),r=t("lTCR"),a=t.n(r);function o(){var e=function(e,n){n||(n=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}(["query ClubsSearch($name: String){\n                      clubsSearch(name: $name, orderBy: { column: NAME1, order: ASC }) {\n                        data {\n                          id\n                          name1\n                        }\n                        paginatorInfo {\n                          count\n                          total\n                        }\n                      }\n                    }\n                "]);return o=function(){return e},e}var s={name:"ClubSearch",props:{selectClub:Function},methods:{setClub:function(e){e&&("function"==typeof this.selectClub&&this.selectClub(parseInt(e.id)),this.selectedClub=e)},unsetClub:function(){this.selectedClub=null,this.selectClub(null)},searchClubs:Object(i.b)((function(e){e.length?(this.searchName=e,this.$apollo.queries.clubs.refresh()):this.clubs.data=[]}),200)},data:function(){return{querySearchName:"",searchName:"",selectedClub:null,clubs:{data:[]}}},apollo:{clubs:{query:a()(o()),update:function(e){return e.clubsSearch},variables:function(){return{name:"%"+this.searchName+"%"}}}}},l=t("KHd+"),u=Object(l.a)(s,(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("b-field",{attrs:{label:e.$t("roundsGenerator.findClub")}},[e.selectedClub?e._e():t("b-autocomplete",{attrs:{icon:"search","clear-on-select":!0,clearable:!0,data:this.clubs.data,"keep-first":!0,loading:e.$apollo.queries.clubs.loading,placeholder:e.$t("roundsGenerator.findClubPlaceholder"),field:"name1"},on:{select:e.setClub,typing:e.searchClubs},model:{value:e.querySearchName,callback:function(n){e.querySearchName=n},expression:"querySearchName"}},[t("template",{slot:"empty"},[e._v("No results for "+e._s(e.querySearchName))])],2)],1),e._v(" "),t("div",{staticClass:"field"},[e.selectedClub?t("b-tag",{attrs:{"aria-close-label":"Fjern",attached:"",closable:"","close-type":"is-danger",size:"is-large"},on:{close:e.unsetClub}},[e._v("\n            "+e._s(e.selectedClub.name1)+"\n        ")]):e._e()],1)],1)}),[],!1,null,"cd30f6f2",null);n.a=u.exports},HAfB:function(e,n,t){"use strict";t.r(n);var i=t("lTCR"),r=t.n(i),a=t("Yfz1"),o=t("j0+K");t("90ce");function s(){var e=function(e,n){n||(n=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}(["\n                        mutation ($input: RegisterInput!){\n                          register(input: $input){\n                            status\n                            tokens{access_token}\n                          }\n                        }\n                    "]);return s=function(){return e},e}var l={name:"CreateUser",components:{BadmintonPlayerClubs:t("Ii3d").a},props:{afterRegister:Function},data:function(){return{name:null,email:null,password:null,password_confirmation:null,clubId:null,loading:!1,playerId:null}},methods:{create:function(){var e=this;this.loading=!0,this.$apollo.mutate({mutation:r()(s()),variables:{input:{name:this.name,email:this.email,organization_id:this.clubId,player_id:this.playerId,password:this.password,password_confirmation:this.password_confirmation}}}).then((function(n){var t=n.data;Object(o.d)(t.register.tokens.access_token),e.$root.$emit("loggedIn"),e.afterRegister instanceof Function?e.afterRegister():e.$router.push({name:"my-club"})})).catch((function(n){var t=n.graphQLErrors,i=Object(a.d)(t);e.$buefy.snackbar.open({duration:6e3,type:"is-danger",message:"Kunne ikke oprette bruger. <br />"+i.join("<br />")})})).finally((function(){e.loading=!1}))}}},u=t("KHd+"),c=Object(u.a)(l,(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"mb-2"},[t("b-field",{attrs:{label:"Navn"}},[t("b-input",{attrs:{icon:"user-alt",placeholder:"Viktor Axelsen"},model:{value:e.name,callback:function(n){e.name=n},expression:"name"}})],1),e._v(" "),t("b-field",{attrs:{label:"Email"}},[t("b-input",{attrs:{icon:"envelope",placeholder:"viktor@gmail.com",type:"email"},model:{value:e.email,callback:function(n){e.email=n},expression:"email"}})],1),e._v(" "),t("b-field",{attrs:{label:"Badminton Player Klub"}},[t("BadmintonPlayerClubs",{model:{value:e.clubId,callback:function(n){e.clubId=n},expression:"clubId"}})],1),e._v(" "),t("b-field",{attrs:{label:"Adgangskode"}},[t("b-input",{attrs:{icon:"lock",placeholder:"******",type:"password"},model:{value:e.password,callback:function(n){e.password=n},expression:"password"}})],1),e._v(" "),t("b-field",{attrs:{label:"Gentag adgangskode"}},[t("b-input",{attrs:{icon:"lock",placeholder:"******",type:"password"},model:{value:e.password_confirmation,callback:function(n){e.password_confirmation=n},expression:"password_confirmation"}})],1),e._v(" "),t("b-button",{attrs:{loading:e.loading},on:{click:e.create}},[e._v("Opret")])],1)}),[],!1,null,"bd27ba70",null);n.default=c.exports},Ii3d:function(e,n,t){"use strict";var i=t("lTCR");function r(){var e=function(e,n){n||(n=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}(["\n                query {\n                 clubs{\n                    id\n                    name1\n                  }\n                }\n               "]);return r=function(){return e},e}var a={name:"BadmintonPlayerClubs",props:["value"],methods:{handleInput:function(e){this.$emit("input",e)}},apollo:{clubs:{query:t.n(i)()(r())}}},o=t("KHd+"),s=Object(o.a)(a,(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("b-select",{attrs:{loading:e.$apollo.queries.clubs.loading,expanded:"",placeholder:"Vælge klub"},on:{input:e.handleInput}},e._l(e.clubs,(function(n){return t("option",{key:n.id,domProps:{value:n.id}},[e._v("\n        "+e._s(n.name1)+"\n    ")])})),0)}),[],!1,null,null,null);n.a=s.exports},NTeI:function(e,n,t){"use strict";var i=t("MQ60"),r=t.n(i),a=t("Yfz1");function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){l(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var u={name:"TeamTable",components:{Draggable:r.a},props:{viewMode:Boolean,confirmDelete:Function,move:Function,deletePlayer:Function,copyPlayer:Function,playingToHigh:{type:Array,default:[]},playingToHighInSquad:{type:Array,default:[]},teams:{type:Array,default:[]},search:{type:String,default:""}},methods:{resolveLabel:function(e){var n="";return this.isPlayingToHigh(e)&&(n+="Gul: En eller flere spiller har mere end 50/100 point på NIVEAU-ranglisten, på et laverer hold"),this.isPlayingToHighInSquad(e)&&(n+="\n Rød: En eller flere spiller har mere end 50 point på kategori-ranglisten, på et laverer hold"),n},isPlayingToHigh:function(e){return Object(a.h)(this.playingToHigh,e)},isPlayingToHighInSquad:function(e){return Object(a.h)(this.playingToHighInSquad,e)},findPositions:a.g,highlight:function(e){var n={};return this.viewMode?(n={pointer:!1},""!==this.search.trim()&&(n=s(s({},{"has-text-white":e.name.toLowerCase().includes(this.search.toLowerCase()),"has-background-black":e.name.toLowerCase().includes(this.search.toLowerCase())}),n))):(Object(a.h)(this.playingToHigh,e)&&(n=s(s({},{"has-background-warning":!0}),n)),Object(a.h)(this.playingToHighInSquad,e)&&(n=s(s({},{"has-background-danger":!0}),n))),n}}},c=t("KHd+"),d=Object(c.a)(u,(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("fragment",e._l(e.teams,(function(n,i){return t("div",{key:n.id,staticClass:"column is-4"},[t("table",{staticClass:"table is-striped mt-5 is-fullwidth"},[t("thead",[t("tr",[t("th",{attrs:{colspan:"2"}},[e._v("\n                    Hold "+e._s(i+1)+"\n                    "),e.viewMode?e._e():t("b-button",{staticClass:"is-pulled-right",attrs:{"icon-left":"trash-alt"},on:{click:function(t){return e.confirmDelete(n)}}}),e._v(" "),e.viewMode?e._e():t("b-tooltip",{staticClass:"is-pulled-right",attrs:{label:"Flyt hold op"}},[0!==i?t("b-button",{attrs:{"icon-left":"angle-up"},on:{click:function(n){return e.move(i,-1)}}}):e._e()],1),e._v(" "),e.viewMode?e._e():t("b-tooltip",{staticClass:"is-pulled-right",attrs:{label:"Flyt hold ned"}},[i!==e.teams.length-1?t("b-button",{attrs:{"icon-left":"angle-down"},on:{click:function(n){return e.move(i,1)}}}):e._e()],1)],1)])]),e._v(" "),t("tbody",e._l(n.categories,(function(n){return t("tr",{key:n.name},[t("th",[e._v(e._s(n.name))]),e._v(" "),t("draggable",{attrs:{disabled:e.viewMode,list:n.players,group:"players",handle:".handle",tag:"td"},on:{end:function(n){return e.$emit("end")}}},[e._l(n.players,(function(i){return t("div",{staticClass:"is-clearfix mt-1"},[t("b-tooltip",{attrs:{label:e.resolveLabel(i),active:e.isPlayingToHigh(i)||e.isPlayingToHighInSquad(i),multilined:""}},[t("p",{staticClass:"fa-pull-left handle",class:e.highlight(i)},[e.viewMode?e._e():t("b-icon",{attrs:{icon:"bars",size:"is-small"}}),e._v("\n                                "+e._s(i.name)+" ("+e._s(e.findPositions(i,"N")+" "+e.findPositions(i,n.category))+")\n                            ")],1)]),e._v(" "),t("b-dropdown",{staticClass:"is-pulled-right",attrs:{"aria-role":"list"}},[n.players.length&&!e.viewMode?t("b-button",{attrs:{slot:"trigger","icon-left":"ellipsis-v",size:"is-small"},slot:"trigger"}):e._e(),e._v(" "),t("b-dropdown-item",{attrs:{"aria-role":"menuitem","has-link":""}},[t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.deletePlayer(n,i)}}},[t("b-icon",{attrs:{icon:"times-circle"}}),e._v("\n                                    Slet\n                                ")],1)]),e._v(" "),t("b-dropdown-item",{attrs:{"aria-role":"menuitem","has-link":""}},[t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.copyPlayer(n,i)}}},[t("b-icon",{attrs:{icon:"copy"}}),e._v("\n                                    Kopier\n                                ")],1)])],1)],1)})),e._v(" "),n.players.length?e._e():t("p",[e._v("---------------")])],2)],1)})),0)])])})),0)}),[],!1,null,null,null);n.a=d.exports},Yfz1:function(e,n,t){"use strict";function i(e,n){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"==typeof e)return r(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return r(e,n)}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==t.return||t.return()}finally{if(l)throw o}}}}function r(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}function a(e,n){for(var t=[],i=0;i<e.length;i++){var r=t[t.length-1];r&&r.length!==n?r.push(e[i]):t.push([e[i]])}return t}function o(e,n){return void 0===e?n:e}function s(e,n){var t=null;return function(){clearTimeout(t);var i=arguments,r=this;t=setTimeout((function(){e.apply(r,i)}),n)}}function l(e,n,t){var r,a=[],o=i(e);try{for(o.s();!(r=o.n()).done;){var s=r.value;if(s.category===n){var l,u=i(s.players);try{for(u.s();!(l=u.n()).done;){var c=l.value;c.gender===t&&a.push(c)}}catch(e){u.e(e)}finally{u.f()}}}}catch(e){o.e(e)}finally{o.f()}return a}function u(e,n){if(!e.points)return 0;var t,r=i(e.points);try{for(r.s();!(t=r.n()).done;){var a=t.value;if("MD"===n){if("M"===e.gender&&"MxH"===a.category)return a.points;if("K"===e.gender&&"MxD"===a.category)return a.points}if(a.category===n)return a.points}}catch(e){r.e(e)}finally{r.f()}return 0}function c(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";if(!e.points)return"";var t,r=[],a=i(e.points);try{for(a.s();!(t=a.n()).done;){var o=t.value;null!==o.category||null===o.points||"all"!==n&&"N"!==n||r.push("N:"+o.points),"HS"!==o.category||"all"!==n&&"HS"!==n||r.push("HS:"+o.points),"HD"!==o.category||"all"!==n&&"HD"!==n||r.push("HD:"+o.points),"DS"!==o.category||"all"!==n&&"DS"!==n||r.push("DS:"+o.points),"DD"!==o.category||"all"!==n&&"DD"!==n||r.push("DD:"+o.points),"MxH"!==o.category||"M"!==e.gender||"all"!==n&&"MD"!==n||r.push("MxH:"+o.points),"MxD"!==o.category||"K"!==e.gender||"all"!==n&&"MD"!==n||r.push("MxD:"+o.points)}}catch(e){a.e(e)}finally{a.f()}return r.join(", ")}function d(e){var n,t=[],r=i(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;if("validation"===a.extensions.category)for(var o in a.extensions.validation){var s,l=i(a.extensions.validation[o]);try{for(l.s();!(s=l.n()).done;){var u=s.value;t.push(u)}}catch(e){l.e(e)}finally{l.f()}}}}catch(e){r.e(e)}finally{r.f()}return t}function f(e,n){return void 0!==e.find((function(e){return e.id===n.id}))}function p(e,n){return void 0!==e.find((function(e){return e.name===n.name}))}function b(e,n,t){var i=e[n],r=e[t];e[t]=i,e[n]=r}t.d(n,"a",(function(){return a})),t.d(n,"c",(function(){return o})),t.d(n,"b",(function(){return s})),t.d(n,"f",(function(){return l})),t.d(n,"e",(function(){return u})),t.d(n,"g",(function(){return c})),t.d(n,"d",(function(){return d})),t.d(n,"h",(function(){return f})),t.d(n,"i",(function(){return p})),t.d(n,"j",(function(){return b}))},egvZ:function(e,n,t){"use strict";var i=t("lTCR"),r=t.n(i);function a(){var e=s(["\n                        mutation updateMe($input: UpdateMe!){\n                            updateMe(input: $input){\n                                id\n                                name\n                                email\n                                player_id\n                            }\n                        }\n                    "]);return a=function(){return e},e}function o(){var e=s(["\n                query{\n                    me{\n                        id\n                        email\n                        name\n                        player_id\n                    }\n                }"]);return o=function(){return e},e}function s(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}var l={name:"ChangeProfile",apollo:{me:{query:r()(o()),fetchPolicy:"network-only"}},props:{onlyBadmintonId:Boolean},methods:{update:function(){var e=this;this.updatingProfile=!0,this.$apollo.mutate({mutation:r()(a()),variables:{input:{name:this.me.name,email:this.me.email,player_id:this.me.player_id}}}).then((function(){e.$root.$emit("userUpdated"),e.$buefy.snackbar.open({duration:2e3,type:"is-success",message:"Din profil er nu opdateret"})})).finally((function(){e.updatingProfile=!1}))}},data:function(){return{me:{name:"",email:""},updatingProfile:!1}}},u=t("KHd+"),c=Object(u.a)(l,(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("form",{on:{submit:function(e){e.preventDefault()}}},[e.onlyBadmintonId?e._e():t("b-field",{attrs:{label:"Navn"}},[t("b-input",{model:{value:e.me.name,callback:function(n){e.$set(e.me,"name",n)},expression:"me.name"}})],1),e._v(" "),e.onlyBadmintonId?e._e():t("b-field",{attrs:{label:"Email"}},[t("b-input",{attrs:{type:"email"},model:{value:e.me.email,callback:function(n){e.$set(e.me,"email",n)},expression:"me.email"}})],1),e._v(" "),t("b-field",{attrs:{label:"Badminton ID"}},[t("b-input",{attrs:{placeholder:"ÅÅMMDD-XX",type:"text"},model:{value:e.me.player_id,callback:function(n){e.$set(e.me,"player_id",n)},expression:"me.player_id"}})],1),e._v(" "),t("a",{staticClass:"is-clearfix",attrs:{href:"https://www.badmintonplayer.dk/DBF/Ranglister/",target:"_blank"}},[e._v("Find dit Badminton ID på ranglisten")]),e._v(" "),t("b-button",{staticClass:"mt-2",attrs:{loading:e.updatingProfile},on:{click:e.update}},[e._v("Gem")]),e._v(" "),t("div",{staticClass:"mt-4"})],1)}),[],!1,null,null,null);n.a=c.exports},qLY9:function(e,n,t){"use strict";t.r(n);var i=t("lTCR"),r=t.n(i),a=t("NTeI"),o=t("GtFb");function s(){var e=u(["\n                                            mutation($input: UnsubscribeWebPushInput!){\n                                                unsubscribeWebPush(input: $input)\n                                            }\n                                        "]);return s=function(){return e},e}function l(){var e=u(["\n                                            mutation($input: SubscribeWebPushInput!){\n                                                subscribeWebPush(input: $input){\n                                                    id\n                                                }\n                                            }\n                                        "]);return l=function(){return e},e}function u(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function c(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var d=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}var n,t,i;return n=e,i=[{key:"registerServiceWorker",value:function(){var e=this;if("serviceWorker"in navigator)return navigator.serviceWorker.register("/sw.js").then((function(){return e.initialiseServiceWorker()}));console.log("Service workers aren't supported in this browser.")}},{key:"initialiseServiceWorker",value:function(){if("showNotification"in ServiceWorkerRegistration.prototype)if("denied"!==Notification.permission){if("PushManager"in window)return navigator.serviceWorker.ready;console.log("Push messaging isn't supported.")}else console.log("The user has blocked notifications.");else console.log("Notifications aren't supported.")}},{key:"subscribe",value:function(){var n=this;return navigator.serviceWorker.ready.then((function(t){var i={userVisibleOnly:!0},r=window.Laravel.vapidPublicKey;return r&&(i.applicationServerKey=e.urlBase64ToUint8Array(r)),t.pushManager.subscribe(i).catch((function(e){"denied"===Notification.permission?(console.log("Permission for Notifications was denied"),n.pushButtonDisabled=!0):(console.log("Unable to subscribe to push.",e),n.pushButtonDisabled=!1)}))}))}},{key:"unsubscribe",value:function(){return navigator.serviceWorker.ready.then((function(e){return e.pushManager.getSubscription().catch((function(e){console.log("Error thrown while unsubscribing.",e)}))}))}},{key:"updateSubscription",value:function(e){var n=e.getKey("p256dh"),t=e.getKey("auth"),i=(PushManager.supportedContentEncodings||["aesgcm"])[0],a={endpoint:e.endpoint,publicKey:n?btoa(String.fromCharCode.apply(null,new Uint8Array(n))):null,authToken:t?btoa(String.fromCharCode.apply(null,new Uint8Array(t))):null,contentEncoding:i};o.a.mutate({mutation:r()(l()),variables:{input:a}})}},{key:"deleteSubscription",value:function(e){o.a.mutate({mutation:r()(s()),variables:{input:{endpoint:e.endpoint}}})}},{key:"urlBase64ToUint8Array",value:function(e){for(var n=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),t=window.atob(n),i=new Uint8Array(t.length),r=0;r<t.length;++r)i[r]=t.charCodeAt(r);return i}}],(t=[{key:"togglePush",value:function(){this.isPushEnabled?this.unsubscribe():this.subscribe()}}])&&c(n.prototype,t),i&&c(n,i),e}();function f(){var e=b(["\n                                mutation updateMe($input: UpdateMe!){\n                                    updateMe(input: $input){\n                                        id\n                                        name\n                                        email\n                                        subscriptionSettings{\n                                            id\n                                            email\n                                        }\n                                    }\n                                }\n                            "]);return f=function(){return e},e}function p(){var e=b(["\n                query {\n                    me{\n                        id\n                        email\n                        player_id\n                        subscriptionSettings{\n                            id\n                            email\n                        }\n                    }\n                }\n            "]);return p=function(){return e},e}function b(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}var h={name:"Notification",components:{ChangeProfile:t("egvZ").a},data:function(){return{isPushEnabled:!1,pushButtonDisabled:!1,subscribingWebPushLoading:!1,unsubscribingWebPushLoading:!1,updateSubscriptionEmailLoading:!1,isPushPossible:!0}},computed:{isEmailSubscribed:function(){var e;return(null===(e=this.me.subscriptionSettings)||void 0===e?void 0:e.email)||!1},hasBadmintonId:function(){var e;return(null===(e=this.me)||void 0===e?void 0:e.player_id)||!1}},mounted:function(){var e=this,n=d.registerServiceWorker();n?n.then((function(n){n.pushManager.getSubscription().then((function(n){e.pushButtonDisabled=!1,n&&(d.updateSubscription(n),e.isPushEnabled=!0)})).catch((function(e){console.log("Error during getSubscription()",e)}))})):this.isPushPossible=!1},apollo:{me:{query:r()(p())}},methods:{subscribe:function(){var e=this;this.subscribingWebPushLoading=!0,d.subscribe().then((function(n){e.isPushEnabled=!0,d.updateSubscription(n)})).finally((function(){e.subscribingWebPushLoading=!1}))},unsubscribe:function(){var e=this;this.unsubscribingWebPushLoading=!0,d.unsubscribe().then((function(n){n?n.unsubscribe().then((function(){d.deleteSubscription(n),e.isPushEnabled=!1})).catch((function(n){console.log("Unsubscription error: ",n),e.pushButtonDisabled=!1})).finally((function(){e.unsubscribingWebPushLoading=!1})):e.isPushEnabled=!1}))},emailSubscribe:function(e){var n,t=this;this.unsubscribingEmailLoading=!0;var i={input:{subscriptionSettings:{upsert:{email:e}}}};null!==(n=this.me.subscriptionSettings)&&void 0!==n&&n.id&&(i.input.subscriptionSettings.upsert.id=this.me.subscriptionSettings.id),this.$apollo.mutate({mutation:r()(f()),variables:i}).then((function(){t.$apollo.queries.me.refresh()})).finally((function(){t.updateSubscriptionEmailLoading=!1}))}}},m=t("KHd+"),g=Object(m.a)(h,(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("fragment",[e.$apollo.loading||e.hasBadmintonId?e._e():t("div",[t("p",[e._v("For at notificationer virker skal du angive dit Badminton ID")]),e._v(" "),t("ChangeProfile",{attrs:{"only-badminton-id":!0}})],1),e._v(" "),!e.$apollo.loading&&e.hasBadmintonId?t("div",[t("h1",{staticClass:"title is-5"},[e._v("Web Push")]),e._v(" "),e.isPushEnabled?e._e():t("b-button",{attrs:{loading:this.subscribingWebPushLoading,disabled:!e.isPushPossible,type:"is-primary"},on:{click:e.subscribe}},[e._v("\n            Aktiver\n        ")]),e._v(" "),e.isPushEnabled?t("b-button",{attrs:{disabled:!e.isPushPossible,loading:this.unsubscribingWebPushLoading,type:"is-primary"},on:{click:e.unsubscribe}},[e._v("\n            Deaktiver\n        ")]):e._e(),e._v(" "),t("p",{staticClass:"mt-2"},[e._v("Personlig push beskeder direkte til dig fra din browser.")]),e._v(" "),t("hr"),e._v(" "),t("h1",{staticClass:"title is-5"},[e._v("Email")]),e._v(" "),e.$apollo.loading||e.isEmailSubscribed?e._e():t("b-button",{attrs:{loading:e.$apollo.queries.me.loading||e.updateSubscriptionEmailLoading,type:"is-primary"},on:{click:function(n){return e.emailSubscribe(!0)}}},[e._v("\n            Aktiver\n        ")]),e._v(" "),!e.$apollo.loading&&e.isEmailSubscribed?t("b-button",{attrs:{loading:e.$apollo.queries.me.loading||e.updateSubscriptionEmailLoading,type:"is-primary"},on:{click:function(n){return e.emailSubscribe(!1)}}},[e._v("\n            Deaktiver\n        ")]):e._e(),e._v(" "),e.$apollo.loading?e._e():t("p",{staticClass:"mt-2"},[e._v("Sender til: "),t("strong",[e._v(e._s(e.me.email))])])],1):e._e()])}),[],!1,null,"cec4f878",null).exports,v=t("HAfB"),y=t("j0+K"),_={name:"CreateNotification",components:{Login:t("8Vt7").default,CreateUser:v.default,Notification:g},data:function(){return{email:"",loggedIn:!1,showCreateUser:!1,showLogin:!1}},mounted:function(){this.loggedIn=Object(y.b)()},methods:{refresh:function(){this.loggedIn=!0,this.showLogin=!1,this.showCreateUser=!1}}};function w(){var e=P([" query ($id: ID!){\n                  team(id: $id){\n                    id\n                    name\n                    gameDate\n                    squads{\n                        id\n                        playerLimit\n                        categories{\n                            category\n                            name\n                            players{\n                                gender\n                                id\n                                name\n                                refId\n                                points{\n                                    category\n                                    points\n                                    position\n                                }\n                            }\n                        }\n                    }\n                    club {\n                        id\n                        name1\n                    }\n                  }\n                }"]);return w=function(){return e},e}function k(){var e=P(["\n                                    mutation{\n                                        sendNotification\n                                    }\n                                "]);return k=function(){return e},e}function P(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}var C={name:"TeamFightPublic",components:{CreateNotification:Object(m.a)(_,(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("form",{on:{submit:function(e){e.preventDefault()}}},[t("div",{staticClass:"modal-card",staticStyle:{width:"auto"}},[t("header",{staticClass:"modal-card-head"},[t("p",{staticClass:"modal-card-title"},[e._v("Notifikationer")]),e._v(" "),t("button",{staticClass:"delete",attrs:{type:"button"},on:{click:function(n){return e.$parent.close()}}})]),e._v(" "),t("section",{staticClass:"modal-card-body"},[e.loggedIn?e._e():t("div",[t("p",{staticClass:"mb-2"},[e._v("Tilmeld dig og få notifikationer når der sker ændringer.")]),e._v(" "),t("hr"),e._v(" "),t("div",{staticClass:"buttons"},[e.showLogin||e.showCreateUser?t("b-button",{attrs:{expanded:""},on:{click:function(n){e.showLogin=!1,e.showCreateUser=!1}}},[e._v("Tilbage")]):e._e(),e._v(" "),e.showLogin||e.showCreateUser?e._e():t("b-button",{attrs:{expanded:""},on:{click:function(n){e.showLogin=!e.showLogin}}},[e._v("Login")]),e._v(" "),e.showLogin||e.showCreateUser?e._e():t("b-button",{attrs:{expanded:""},on:{click:function(n){e.showCreateUser=!e.showCreateUser}}},[e._v("Opret bruger")])],1),e._v(" "),e.showCreateUser?t("create-user",{attrs:{"after-register":e.refresh}}):e._e(),e._v(" "),e.showLogin?t("login",{attrs:{"after-login":e.refresh}}):e._e()],1),e._v(" "),e.loggedIn?t("notification"):e._e()],1),e._v(" "),e.loggedIn?t("footer",{staticClass:"modal-card-foot"},[t("b-button",{attrs:{label:"Luk"},on:{click:function(n){return e.$parent.close()}}})],1):e._e()])])}),[],!1,null,"1591cb5a",null).exports,TeamTable:a.a},methods:{sendNotification:function(){this.loading=!0,this.$apollo.mutate({mutation:r()(k())})}},data:function(){return{searchPlayer:"",showNotificationPopUp:!1}},props:{teamFightId:String},apollo:{team:{query:r()(w()),fetchPolicy:"network-only",variables:function(){return{id:this.teamFightId}}}}},S=Object(m.a)(C,(function(){var e=this,n=e.$createElement,t=e._self._c||n;return e.$apollo.loading?e._e():t("fragment",[t("h1",{staticClass:"title"},[e._v(e._s(e.team.name)+" - "+e._s(e.team.club.name1))]),e._v(" "),t("h2",{staticClass:"subtitle"},[e._v("Spille dato: "+e._s(e.team.gameDate))]),e._v(" "),t("b-modal",{attrs:{"destroy-on-hide":!1,"aria-label":"Notifikation","aria-modal":"","aria-role":"dialog","has-modal-card":"","trap-focus":""},scopedSlots:e._u([{key:"default",fn:function(e){return[t("CreateNotification")]}}],null,!1,224635944),model:{value:e.showNotificationPopUp,callback:function(n){e.showNotificationPopUp=n},expression:"showNotificationPopUp"}}),e._v(" "),t("b-field",{attrs:{label:"Søg efter spiller"}},[t("b-input",{model:{value:e.searchPlayer,callback:function(n){e.searchPlayer=n},expression:"searchPlayer"}})],1),e._v(" "),t("div",{staticClass:"columns is-multiline"},[t("TeamTable",{attrs:{search:this.searchPlayer,teams:this.team.squads,viewMode:!0}})],1)],1)}),[],!1,null,"1fa55f37",null);n.default=S.exports}}]);
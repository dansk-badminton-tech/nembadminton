(window.webpackJsonp=window.webpackJsonp||[]).push([[6,9,15],{"8Vt7":function(e,t,n){"use strict";n.r(t);var i=n("lTCR"),a=n.n(i),r=n("j0+K");function o(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n                        mutation ($input: LoginInput){\n                          login(input: $input){\n                            access_token\n                          }\n                        }\n                    "]);return o=function(){return e},e}var s={name:"Login",data:function(){return{email:null,password:null,loading:!1}},props:{afterLogin:Function},methods:{login:function(){var e=this;this.loading=!0,this.$apollo.mutate({mutation:a()(o()),variables:{input:{username:this.email,password:this.password}}}).then((function(t){var n=t.data;Object(r.d)(n.login.access_token),e.$root.$emit("loggedIn"),e.afterLogin instanceof Function?e.afterLogin():e.$router.push({name:"team-fight-dashboard"})})).catch((function(t){t.graphQLErrors;e.$buefy.snackbar.open({duration:6e3,type:"is-danger",message:"Forkert brugernavn eller adgangskode."})})).finally((function(){e.loading=!1}))}}},l=n("KHd+"),u=Object(l.a)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{staticClass:"mt-2",on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[n("b-field",{attrs:{label:"Email"}},[n("b-input",{attrs:{type:"email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),e._v(" "),n("b-field",{attrs:{label:"Adgangskode"}},[n("b-input",{attrs:{type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),e._v(" "),n("b-button",{attrs:{loading:e.loading,"native-type":"submit"}},[e._v("Login")])],1)}),[],!1,null,"b2e23c82",null);t.default=u.exports},"90ce":function(e,t,n){"use strict";var i=n("Yfz1"),a=n("lTCR"),r=n.n(a);function o(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["query ClubsSearch($name: String){\n                      clubsSearch(name: $name, orderBy: { column: NAME1, order: ASC }) {\n                        data {\n                          id\n                          name1\n                        }\n                        paginatorInfo {\n                          count\n                          total\n                        }\n                      }\n                    }\n                "]);return o=function(){return e},e}var s={name:"ClubSearch",props:{selectClub:Function},methods:{setClub:function(e){e&&("function"==typeof this.selectClub&&this.selectClub(parseInt(e.id)),this.selectedClub=e)},unsetClub:function(){this.selectedClub=null,this.selectClub(null)},searchClubs:Object(i.b)((function(e){e.length?(this.searchName=e,this.$apollo.queries.clubs.refresh()):this.clubs.data=[]}),200)},data:function(){return{querySearchName:"",searchName:"",selectedClub:null,clubs:{data:[]}}},apollo:{clubs:{query:r()(o()),update:function(e){return e.clubsSearch},variables:function(){return{name:"%"+this.searchName+"%"}}}}},l=n("KHd+"),u=Object(l.a)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-field",{attrs:{label:e.$t("roundsGenerator.findClub")}},[e.selectedClub?e._e():n("b-autocomplete",{attrs:{icon:"search","clear-on-select":!0,clearable:!0,data:this.clubs.data,"keep-first":!0,loading:e.$apollo.queries.clubs.loading,placeholder:e.$t("roundsGenerator.findClubPlaceholder"),field:"name1"},on:{select:e.setClub,typing:e.searchClubs},model:{value:e.querySearchName,callback:function(t){e.querySearchName=t},expression:"querySearchName"}},[n("template",{slot:"empty"},[e._v("No results for "+e._s(e.querySearchName))])],2)],1),e._v(" "),n("div",{staticClass:"field"},[e.selectedClub?n("b-tag",{attrs:{"aria-close-label":"Fjern",attached:"",closable:"","close-type":"is-danger",size:"is-large"},on:{close:e.unsetClub}},[e._v("\n            "+e._s(e.selectedClub.name1)+"\n        ")]):e._e()],1)],1)}),[],!1,null,"cd30f6f2",null);t.a=u.exports},HAfB:function(e,t,n){"use strict";n.r(t);var i=n("lTCR"),a=n.n(i),r=n("Yfz1"),o=n("j0+K");n("90ce");function s(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n                        mutation ($input: RegisterInput!){\n                          register(input: $input){\n                            status\n                            tokens{access_token}\n                          }\n                        }\n                    "]);return s=function(){return e},e}var l={name:"CreateUser",components:{BadmintonPlayerClubs:n("Ii3d").a},props:{afterRegister:Function},data:function(){return{name:null,email:null,password:null,password_confirmation:null,clubId:null,loading:!1,playerId:null}},methods:{create:function(){var e=this;this.loading=!0,this.$apollo.mutate({mutation:a()(s()),variables:{input:{name:this.name,email:this.email,organization_id:this.clubId,player_id:this.playerId,password:this.password,password_confirmation:this.password_confirmation}}}).then((function(t){var n=t.data;Object(o.d)(n.register.tokens.access_token),e.$root.$emit("loggedIn"),e.afterRegister instanceof Function?e.afterRegister():e.$router.push({name:"my-club"})})).catch((function(t){var n=t.graphQLErrors,i=Object(r.d)(n);e.$buefy.snackbar.open({duration:6e3,type:"is-danger",message:"Kunne ikke oprette bruger. <br />"+i.join("<br />")})})).finally((function(){e.loading=!1}))}}},u=n("KHd+"),c=Object(u.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mb-2"},[n("b-field",{attrs:{label:"Navn"}},[n("b-input",{attrs:{icon:"user-alt",placeholder:"Viktor Axelsen"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),n("b-field",{attrs:{label:"Email"}},[n("b-input",{attrs:{icon:"envelope",placeholder:"viktor@gmail.com",type:"email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),e._v(" "),n("b-field",{attrs:{label:"Badminton Player Klub"}},[n("BadmintonPlayerClubs",{model:{value:e.clubId,callback:function(t){e.clubId=t},expression:"clubId"}})],1),e._v(" "),n("b-field",{attrs:{label:"Badminton Player ID (Valgfrit)"}},[n("b-input",{attrs:{icon:"user-alt",placeholder:"900910-17",type:"text"},model:{value:e.playerId,callback:function(t){e.playerId=t},expression:"playerId"}})],1),e._v(" "),n("a",{staticClass:"is-clearfix",attrs:{href:"https://www.badmintonplayer.dk/DBF/Ranglister/",target:"_blank"}},[e._v("Find dit Badminton ID på ranglisten")]),e._v(" "),n("b-field",{attrs:{label:"Adgangskode"}},[n("b-input",{attrs:{icon:"lock",placeholder:"******",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),e._v(" "),n("b-field",{attrs:{label:"Gentag adgangskode"}},[n("b-input",{attrs:{icon:"lock",placeholder:"******",type:"password"},model:{value:e.password_confirmation,callback:function(t){e.password_confirmation=t},expression:"password_confirmation"}})],1),e._v(" "),n("b-button",{attrs:{loading:e.loading},on:{click:e.create}},[e._v("Opret")])],1)}),[],!1,null,"1489ea6c",null);t.default=c.exports},Ii3d:function(e,t,n){"use strict";var i=n("lTCR");function a(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n                query {\n                 clubs{\n                    id\n                    name1\n                  }\n                }\n               "]);return a=function(){return e},e}var r={name:"BadmintonPlayerClubs",props:["value"],methods:{handleInput:function(e){this.$emit("input",e)}},apollo:{clubs:{query:n.n(i)()(a())}}},o=n("KHd+"),s=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-select",{attrs:{loading:e.$apollo.queries.clubs.loading,expanded:"",placeholder:"Vælge klub"},on:{input:e.handleInput}},e._l(e.clubs,(function(t){return n("option",{key:t.id,domProps:{value:t.id}},[e._v("\n        "+e._s(t.name1)+"\n    ")])})),0)}),[],!1,null,null,null);t.a=s.exports},NTeI:function(e,t,n){"use strict";var i=n("MQ60"),a=n.n(i),r=n("Yfz1");function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u={name:"TeamTable",components:{Draggable:a.a},props:{viewMode:Boolean,confirmDelete:Function,move:Function,deletePlayer:Function,copyPlayer:Function,playingToHigh:{type:Array,default:[]},playingToHighInSquad:{type:Array,default:[]},teams:{type:Array,default:[]},search:{type:String,default:""}},methods:{resolveLabel:function(e){var t="";return this.isPlayingToHigh(e)&&(t+="Gul: En eller flere spiller har mere end 50/100 point på NIVEAU-ranglisten, på et laverer hold"),this.isPlayingToHighInSquad(e)&&(t+="\n Rød: En eller flere spiller har mere end 50 point på kategori-ranglisten, på et laverer hold"),t},isPlayingToHigh:function(e){return Object(r.h)(this.playingToHigh,e)},isPlayingToHighInSquad:function(e){return Object(r.h)(this.playingToHighInSquad,e)},findPositions:r.g,highlight:function(e){var t={};return this.viewMode?(t={pointer:!1},""!==this.search.trim()&&(t=s(s({},{"has-text-white":e.name.toLowerCase().includes(this.search.toLowerCase()),"has-background-black":e.name.toLowerCase().includes(this.search.toLowerCase())}),t))):(Object(r.h)(this.playingToHigh,e)&&(t=s(s({},{"has-background-warning":!0}),t)),Object(r.h)(this.playingToHighInSquad,e)&&(t=s(s({},{"has-background-danger":!0}),t))),t}}},c=n("KHd+"),d=Object(c.a)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("fragment",e._l(e.teams,(function(t,i){return n("div",{key:t.id,staticClass:"column is-4"},[n("table",{staticClass:"table is-striped mt-5 is-fullwidth"},[n("thead",[n("tr",[n("th",{attrs:{colspan:"2"}},[e._v("\n                    Hold "+e._s(i+1)+"\n                    "),e.viewMode?e._e():n("b-button",{staticClass:"is-pulled-right",attrs:{"icon-left":"trash-alt"},on:{click:function(n){return e.confirmDelete(t)}}}),e._v(" "),e.viewMode?e._e():n("b-tooltip",{staticClass:"is-pulled-right",attrs:{label:"Flyt hold op"}},[0!==i?n("b-button",{attrs:{"icon-left":"angle-up"},on:{click:function(t){return e.move(i,-1)}}}):e._e()],1),e._v(" "),e.viewMode?e._e():n("b-tooltip",{staticClass:"is-pulled-right",attrs:{label:"Flyt hold ned"}},[i!==e.teams.length-1?n("b-button",{attrs:{"icon-left":"angle-down"},on:{click:function(t){return e.move(i,1)}}}):e._e()],1)],1)])]),e._v(" "),n("tbody",e._l(t.categories,(function(t){return n("tr",{key:t.name},[n("th",[e._v(e._s(t.name))]),e._v(" "),n("draggable",{attrs:{disabled:e.viewMode,list:t.players,group:"players",handle:".handle",tag:"td"},on:{end:function(t){return e.$emit("end")}}},[e._l(t.players,(function(i){return n("div",{staticClass:"is-clearfix mt-1"},[n("b-tooltip",{attrs:{label:e.resolveLabel(i),active:e.isPlayingToHigh(i)||e.isPlayingToHighInSquad(i),multilined:""}},[n("p",{staticClass:"fa-pull-left handle",class:e.highlight(i)},[e.viewMode?e._e():n("b-icon",{attrs:{icon:"bars",size:"is-small"}}),e._v("\n                                "+e._s(i.name)+" ("+e._s(e.findPositions(i,"N")+" "+e.findPositions(i,t.category))+")\n                            ")],1)]),e._v(" "),n("b-dropdown",{staticClass:"is-pulled-right",attrs:{"aria-role":"list"}},[t.players.length&&!e.viewMode?n("b-button",{attrs:{slot:"trigger","icon-left":"ellipsis-v",size:"is-small"},slot:"trigger"}):e._e(),e._v(" "),n("b-dropdown-item",{attrs:{"aria-role":"menuitem","has-link":""}},[n("a",{attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),e.deletePlayer(t,i)}}},[n("b-icon",{attrs:{icon:"times-circle"}}),e._v("\n                                    Slet\n                                ")],1)]),e._v(" "),n("b-dropdown-item",{attrs:{"aria-role":"menuitem","has-link":""}},[n("a",{attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),e.copyPlayer(t,i)}}},[n("b-icon",{attrs:{icon:"copy"}}),e._v("\n                                    Kopier\n                                ")],1)])],1)],1)})),e._v(" "),t.players.length?e._e():n("p",[e._v("---------------")])],2)],1)})),0)])])})),0)}),[],!1,null,null,null);t.a=d.exports},Yfz1:function(e,t,n){"use strict";function i(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function r(e,t){for(var n=[],i=0;i<e.length;i++){var a=n[n.length-1];a&&a.length!==t?a.push(e[i]):n.push([e[i]])}return n}function o(e,t){return void 0===e?t:e}function s(e,t){var n=null;return function(){clearTimeout(n);var i=arguments,a=this;n=setTimeout((function(){e.apply(a,i)}),t)}}function l(e,t,n){var a,r=[],o=i(e);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(s.category===t){var l,u=i(s.players);try{for(u.s();!(l=u.n()).done;){var c=l.value;c.gender===n&&r.push(c)}}catch(e){u.e(e)}finally{u.f()}}}}catch(e){o.e(e)}finally{o.f()}return r}function u(e,t){if(!e.points)return 0;var n,a=i(e.points);try{for(a.s();!(n=a.n()).done;){var r=n.value;if("MD"===t){if("M"===e.gender&&"MxH"===r.category)return r.points;if("K"===e.gender&&"MxD"===r.category)return r.points}if(r.category===t)return r.points}}catch(e){a.e(e)}finally{a.f()}return 0}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";if(!e.points)return"";var n,a=[],r=i(e.points);try{for(r.s();!(n=r.n()).done;){var o=n.value;null!==o.category||null===o.points||"all"!==t&&"N"!==t||a.push("N:"+o.points),"HS"!==o.category||"all"!==t&&"HS"!==t||a.push("HS:"+o.points),"HD"!==o.category||"all"!==t&&"HD"!==t||a.push("HD:"+o.points),"DS"!==o.category||"all"!==t&&"DS"!==t||a.push("DS:"+o.points),"DD"!==o.category||"all"!==t&&"DD"!==t||a.push("DD:"+o.points),"MxH"!==o.category||"M"!==e.gender||"all"!==t&&"MD"!==t||a.push("MxH:"+o.points),"MxD"!==o.category||"K"!==e.gender||"all"!==t&&"MD"!==t||a.push("MxD:"+o.points)}}catch(e){r.e(e)}finally{r.f()}return a.join(", ")}function d(e){var t,n=[],a=i(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;if("validation"===r.extensions.category)for(var o in r.extensions.validation){var s,l=i(r.extensions.validation[o]);try{for(l.s();!(s=l.n()).done;){var u=s.value;n.push(u)}}catch(e){l.e(e)}finally{l.f()}}}}catch(e){a.e(e)}finally{a.f()}return n}function p(e,t){return void 0!==e.find((function(e){return e.id===t.id}))}n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"f",(function(){return l})),n.d(t,"e",(function(){return u})),n.d(t,"g",(function(){return c})),n.d(t,"d",(function(){return d})),n.d(t,"h",(function(){return p}))},egvZ:function(e,t,n){"use strict";var i=n("lTCR"),a=n.n(i);function r(){var e=s(["\n                        mutation updateMe($input: UpdateMe!){\n                            updateMe(input: $input){\n                                id\n                                name\n                                email\n                                player_id\n                            }\n                        }\n                    "]);return r=function(){return e},e}function o(){var e=s(["\n                query{\n                    me{\n                        id\n                        email\n                        name\n                        player_id\n                    }\n                }"]);return o=function(){return e},e}function s(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var l={name:"ChangeProfile",apollo:{me:{query:a()(o()),fetchPolicy:"network-only"}},props:{onlyBadmintonId:Boolean},methods:{update:function(){var e=this;this.updatingProfile=!0,this.$apollo.mutate({mutation:a()(r()),variables:{input:{name:this.me.name,email:this.me.email,player_id:this.me.player_id}}}).then((function(){e.$root.$emit("userUpdated"),e.$buefy.snackbar.open({duration:2e3,type:"is-success",message:"Din profil er nu opdateret"})})).finally((function(){e.updatingProfile=!1}))}},data:function(){return{me:{name:"",email:""},updatingProfile:!1}}},u=n("KHd+"),c=Object(u.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{on:{submit:function(e){e.preventDefault()}}},[e.onlyBadmintonId?e._e():n("b-field",{attrs:{label:"Navn"}},[n("b-input",{model:{value:e.me.name,callback:function(t){e.$set(e.me,"name",t)},expression:"me.name"}})],1),e._v(" "),e.onlyBadmintonId?e._e():n("b-field",{attrs:{label:"Email"}},[n("b-input",{attrs:{type:"email"},model:{value:e.me.email,callback:function(t){e.$set(e.me,"email",t)},expression:"me.email"}})],1),e._v(" "),n("b-field",{attrs:{label:"Badminton ID"}},[n("b-input",{attrs:{placeholder:"ÅÅMMDD-XX",type:"text"},model:{value:e.me.player_id,callback:function(t){e.$set(e.me,"player_id",t)},expression:"me.player_id"}})],1),e._v(" "),n("a",{staticClass:"is-clearfix",attrs:{href:"https://www.badmintonplayer.dk/DBF/Ranglister/",target:"_blank"}},[e._v("Find dit Badminton ID på ranglisten")]),e._v(" "),n("b-button",{staticClass:"mt-2",attrs:{loading:e.updatingProfile},on:{click:e.update}},[e._v("Gem")]),e._v(" "),n("div",{staticClass:"mt-4"})],1)}),[],!1,null,null,null);t.a=c.exports},qLY9:function(e,t,n){"use strict";n.r(t);var i=n("lTCR"),a=n.n(i),r=n("NTeI"),o=n("GtFb");function s(){var e=u(["\n                                            mutation($input: UnsubscribeWebPushInput!){\n                                                unsubscribeWebPush(input: $input)\n                                            }\n                                        "]);return s=function(){return e},e}function l(){var e=u(["\n                                            mutation($input: SubscribeWebPushInput!){\n                                                subscribeWebPush(input: $input){\n                                                    id\n                                                }\n                                            }\n                                        "]);return l=function(){return e},e}function u(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"registerServiceWorker",value:function(){var e=this;if("serviceWorker"in navigator)return navigator.serviceWorker.register("/sw.js").then((function(){return e.initialiseServiceWorker()}));console.log("Service workers aren't supported in this browser.")}},{key:"initialiseServiceWorker",value:function(){if("showNotification"in ServiceWorkerRegistration.prototype)if("denied"!==Notification.permission){if("PushManager"in window)return navigator.serviceWorker.ready;console.log("Push messaging isn't supported.")}else console.log("The user has blocked notifications.");else console.log("Notifications aren't supported.")}},{key:"subscribe",value:function(){var t=this;return navigator.serviceWorker.ready.then((function(n){var i={userVisibleOnly:!0},a=window.Laravel.vapidPublicKey;return a&&(i.applicationServerKey=e.urlBase64ToUint8Array(a)),n.pushManager.subscribe(i).catch((function(e){"denied"===Notification.permission?(console.log("Permission for Notifications was denied"),t.pushButtonDisabled=!0):(console.log("Unable to subscribe to push.",e),t.pushButtonDisabled=!1)}))}))}},{key:"unsubscribe",value:function(){return navigator.serviceWorker.ready.then((function(e){return e.pushManager.getSubscription().catch((function(e){console.log("Error thrown while unsubscribing.",e)}))}))}},{key:"updateSubscription",value:function(e){var t=e.getKey("p256dh"),n=e.getKey("auth"),i=(PushManager.supportedContentEncodings||["aesgcm"])[0],r={endpoint:e.endpoint,publicKey:t?btoa(String.fromCharCode.apply(null,new Uint8Array(t))):null,authToken:n?btoa(String.fromCharCode.apply(null,new Uint8Array(n))):null,contentEncoding:i};o.a.mutate({mutation:a()(l()),variables:{input:r}})}},{key:"deleteSubscription",value:function(e){o.a.mutate({mutation:a()(s()),variables:{input:{endpoint:e.endpoint}}})}},{key:"urlBase64ToUint8Array",value:function(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),n=window.atob(t),i=new Uint8Array(n.length),a=0;a<n.length;++a)i[a]=n.charCodeAt(a);return i}}],(n=[{key:"togglePush",value:function(){this.isPushEnabled?this.unsubscribe():this.subscribe()}}])&&c(t.prototype,n),i&&c(t,i),e}();function p(){var e=b(["\n                                mutation updateMe($input: UpdateMe!){\n                                    updateMe(input: $input){\n                                        id\n                                        name\n                                        email\n                                        subscriptionSettings{\n                                            id\n                                            email\n                                        }\n                                    }\n                                }\n                            "]);return p=function(){return e},e}function f(){var e=b(["\n                query {\n                    me{\n                        id\n                        email\n                        player_id\n                        subscriptionSettings{\n                            id\n                            email\n                        }\n                    }\n                }\n            "]);return f=function(){return e},e}function b(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var h={name:"Notification",components:{ChangeProfile:n("egvZ").a},data:function(){return{isPushEnabled:!1,pushButtonDisabled:!1,subscribingWebPushLoading:!1,unsubscribingWebPushLoading:!1,updateSubscriptionEmailLoading:!1,isPushPossible:!0}},computed:{isEmailSubscribed:function(){var e;return(null===(e=this.me.subscriptionSettings)||void 0===e?void 0:e.email)||!1},hasBadmintonId:function(){var e;return(null===(e=this.me)||void 0===e?void 0:e.player_id)||!1}},mounted:function(){var e=this,t=d.registerServiceWorker();t?t.then((function(t){t.pushManager.getSubscription().then((function(t){e.pushButtonDisabled=!1,t&&(d.updateSubscription(t),e.isPushEnabled=!0)})).catch((function(e){console.log("Error during getSubscription()",e)}))})):this.isPushPossible=!1},apollo:{me:{query:a()(f())}},methods:{subscribe:function(){var e=this;this.subscribingWebPushLoading=!0,d.subscribe().then((function(t){e.isPushEnabled=!0,d.updateSubscription(t)})).finally((function(){e.subscribingWebPushLoading=!1}))},unsubscribe:function(){var e=this;this.unsubscribingWebPushLoading=!0,d.unsubscribe().then((function(t){t?t.unsubscribe().then((function(){d.deleteSubscription(t),e.isPushEnabled=!1})).catch((function(t){console.log("Unsubscription error: ",t),e.pushButtonDisabled=!1})).finally((function(){e.unsubscribingWebPushLoading=!1})):e.isPushEnabled=!1}))},emailSubscribe:function(e){var t,n=this;this.unsubscribingEmailLoading=!0;var i={input:{subscriptionSettings:{upsert:{email:e}}}};null!==(t=this.me.subscriptionSettings)&&void 0!==t&&t.id&&(i.input.subscriptionSettings.upsert.id=this.me.subscriptionSettings.id),this.$apollo.mutate({mutation:a()(p()),variables:i}).then((function(){n.$apollo.queries.me.refresh()})).finally((function(){n.updateSubscriptionEmailLoading=!1}))}}},m=n("KHd+"),g=Object(m.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("fragment",[e.$apollo.loading||e.hasBadmintonId?e._e():n("div",[n("p",[e._v("For at notificationer virker skal du angive dit Badminton ID")]),e._v(" "),n("ChangeProfile",{attrs:{"only-badminton-id":!0}})],1),e._v(" "),!e.$apollo.loading&&e.hasBadmintonId?n("div",[n("h1",{staticClass:"title is-5"},[e._v("Web Push")]),e._v(" "),e.isPushEnabled?e._e():n("b-button",{attrs:{loading:this.subscribingWebPushLoading,disabled:!e.isPushPossible,type:"is-primary"},on:{click:e.subscribe}},[e._v("\n            Aktiver\n        ")]),e._v(" "),e.isPushEnabled?n("b-button",{attrs:{disabled:!e.isPushPossible,loading:this.unsubscribingWebPushLoading,type:"is-primary"},on:{click:e.unsubscribe}},[e._v("\n            Deaktiver\n        ")]):e._e(),e._v(" "),n("p",{staticClass:"mt-2"},[e._v("Personlig push beskeder direkte til dig fra din browser.")]),e._v(" "),n("hr"),e._v(" "),n("h1",{staticClass:"title is-5"},[e._v("Email")]),e._v(" "),e.$apollo.loading||e.isEmailSubscribed?e._e():n("b-button",{attrs:{loading:e.$apollo.queries.me.loading||e.updateSubscriptionEmailLoading,type:"is-primary"},on:{click:function(t){return e.emailSubscribe(!0)}}},[e._v("\n            Aktiver\n        ")]),e._v(" "),!e.$apollo.loading&&e.isEmailSubscribed?n("b-button",{attrs:{loading:e.$apollo.queries.me.loading||e.updateSubscriptionEmailLoading,type:"is-primary"},on:{click:function(t){return e.emailSubscribe(!1)}}},[e._v("\n            Deaktiver\n        ")]):e._e(),e._v(" "),e.$apollo.loading?e._e():n("p",{staticClass:"mt-2"},[e._v("Sender til: "),n("strong",[e._v(e._s(e.me.email))])])],1):e._e()])}),[],!1,null,"cec4f878",null).exports,v=n("HAfB"),y=n("j0+K"),_={name:"CreateNotification",components:{Login:n("8Vt7").default,CreateUser:v.default,Notification:g},data:function(){return{email:"",loggedIn:!1,showCreateUser:!1,showLogin:!1}},mounted:function(){this.loggedIn=Object(y.b)()},methods:{refresh:function(){this.loggedIn=!0,this.showLogin=!1,this.showCreateUser=!1}}};function w(){var e=P([" query ($id: ID!){\n                  team(id: $id){\n                    id\n                    name\n                    gameDate\n                    squads{\n                        id\n                        playerLimit\n                        categories{\n                            category\n                            name\n                            players{\n                                gender\n                                id\n                                name\n                                refId\n                                points{\n                                    category\n                                    points\n                                    position\n                                }\n                            }\n                        }\n                    }\n                    club {\n                        id\n                        name1\n                    }\n                  }\n                }"]);return w=function(){return e},e}function k(){var e=P(["\n                                    mutation{\n                                        sendNotification\n                                    }\n                                "]);return k=function(){return e},e}function P(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var C={name:"TeamFightPublic",components:{CreateNotification:Object(m.a)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{on:{submit:function(e){e.preventDefault()}}},[n("div",{staticClass:"modal-card",staticStyle:{width:"auto"}},[n("header",{staticClass:"modal-card-head"},[n("p",{staticClass:"modal-card-title"},[e._v("Notifikationer")]),e._v(" "),n("button",{staticClass:"delete",attrs:{type:"button"},on:{click:function(t){return e.$parent.close()}}})]),e._v(" "),n("section",{staticClass:"modal-card-body"},[e.loggedIn?e._e():n("div",[n("p",{staticClass:"mb-2"},[e._v("Tilmeld dig og få notifikationer når der sker ændringer.")]),e._v(" "),n("hr"),e._v(" "),n("div",{staticClass:"buttons"},[e.showLogin||e.showCreateUser?n("b-button",{attrs:{expanded:""},on:{click:function(t){e.showLogin=!1,e.showCreateUser=!1}}},[e._v("Tilbage")]):e._e(),e._v(" "),e.showLogin||e.showCreateUser?e._e():n("b-button",{attrs:{expanded:""},on:{click:function(t){e.showLogin=!e.showLogin}}},[e._v("Login")]),e._v(" "),e.showLogin||e.showCreateUser?e._e():n("b-button",{attrs:{expanded:""},on:{click:function(t){e.showCreateUser=!e.showCreateUser}}},[e._v("Opret bruger")])],1),e._v(" "),e.showCreateUser?n("create-user",{attrs:{"after-register":e.refresh}}):e._e(),e._v(" "),e.showLogin?n("login",{attrs:{"after-login":e.refresh}}):e._e()],1),e._v(" "),e.loggedIn?n("notification"):e._e()],1),e._v(" "),e.loggedIn?n("footer",{staticClass:"modal-card-foot"},[n("b-button",{attrs:{label:"Luk"},on:{click:function(t){return e.$parent.close()}}})],1):e._e()])])}),[],!1,null,"1591cb5a",null).exports,TeamTable:r.a},methods:{sendNotification:function(){this.loading=!0,this.$apollo.mutate({mutation:a()(k())})}},data:function(){return{searchPlayer:"",showNotificationPopUp:!1}},props:{teamFightId:String},apollo:{team:{query:a()(w()),fetchPolicy:"network-only",variables:function(){return{id:this.teamFightId}}}}},S=Object(m.a)(C,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.$apollo.loading?e._e():n("fragment",[n("h1",{staticClass:"title"},[e._v(e._s(e.team.name)+" - "+e._s(e.team.club.name1))]),e._v(" "),n("h2",{staticClass:"subtitle"},[e._v("Spille dato: "+e._s(e.team.gameDate))]),e._v(" "),n("b-button",{attrs:{label:"Notifikationer",size:"is-medium",type:"is-primary"},on:{click:function(t){e.showNotificationPopUp=!0}}}),e._v(" "),n("b-modal",{attrs:{"destroy-on-hide":!1,"aria-label":"Notifikation","aria-modal":"","aria-role":"dialog","has-modal-card":"","trap-focus":""},scopedSlots:e._u([{key:"default",fn:function(e){return[n("CreateNotification")]}}],null,!1,224635944),model:{value:e.showNotificationPopUp,callback:function(t){e.showNotificationPopUp=t},expression:"showNotificationPopUp"}}),e._v(" "),n("b-field",{attrs:{label:"Søg efter spiller"}},[n("b-input",{model:{value:e.searchPlayer,callback:function(t){e.searchPlayer=t},expression:"searchPlayer"}})],1),e._v(" "),n("div",{staticClass:"columns is-multiline"},[n("TeamTable",{attrs:{search:this.searchPlayer,teams:this.team.squads,viewMode:!0}})],1)],1)}),[],!1,null,"45719808",null);t.default=S.exports}}]);